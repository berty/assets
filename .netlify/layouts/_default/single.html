{{ $asset := resources.Get .Params.file_path }}

{{ .Scratch.Set "body-class" "page-single wh" }}

{{ partial "head" . }}

<header class="header-rounded large {{ if .Params.Hclass }}{{.Params.Hclass}}{{ else }}bg-blue gradient{{ end }}">
  <div class="container text-center">
    <h1 class="text-shadow">{{.Title}}</h1>
    {{ if .Params.Subtitle }}
    <h3 class="text-shadow subtitle">{{.Params.Subtitle | markdownify }}</h3>
    {{ end }}
  </div><!-- /.container -->
</header>

<div class="content">
  <div class="container">

  <div>
      <img style="max-width: 800px;" src="{{ partial `asset-image` . }}">
    </div>

    <h3>{{ .Params.file_name }}</h3>

    <div>
      <a class="btn btn-primary" href="{{ $asset.RelPermalink }}" download>Download</a>
    </div>

    {{ $related_assets := where .Site.RegularPages "Params.folder_id" .Params.folder_id }}
    {{ if gt (len $related_assets) 1 }}
    <div class="row">

      <div class="col-md-12 text-left my-4">
        <h4>Related assets</h4>
      </div>

      {{ range where .Site.RegularPages "Params.folder_id" .Params.folder_id }}
        {{ if ne .Params.file_name $.Params.file_name }}
        {{ partial "block_details" (dict "page" . "ctx" $) }}
        {{ end }}
      {{ end }}

    </div>
    {{ end }}

  </div><!-- /.container -->
</div>

{{ partial "footer" . }}

